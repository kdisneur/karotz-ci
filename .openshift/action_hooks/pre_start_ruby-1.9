#!/bin/bash

# The pre_start_cartridge and pre_stop_cartridge hooks are *SOURCED*
# immediately before (re)starting or stopping the specified cartridge.
# They are able to make any desired environment variable changes as
# well as other adjustments to the application environment.

# The post_start_cartridge and post_stop_cartridge hooks are executed
# immediately after (re)starting or stopping the specified cartridge.

# Exercise caution when adding commands to these hooks.  They can
# prevent your application from stopping cleanly or starting at all.
# Application start and stop is subject to different timeouts
# throughout the system.

# KAROTZ
# FIX: INTERCATIVE PROMPT DOES NOT WORK!
if [ ! -e ${OPENSHIFT_DATA_DIR}/.karotz ]; then
  echo "Initialization of karotz api file"

  echo -n 'Enter the karotz api key: '
  read api_key
  echo -n 'Enter the karotz secret key: '
  read -s secret_key

  echo "export KAROTZ_APIKEY='${api_key}'"    >> ${OPENSHIFT_DATA_DIR}/.karotz
  echo "export KAROTZ_SECRET='${secret_key}'" >> ${OPENSHIFT_DATA_DIR}/.karotz
fi

echo "Load the karotz api file"
source ${OPENSHIFT_DATA_DIR}/.karotz


# MAILCHIMP
# FIX: INTERCATIVE PROMPT DOES NOT WORK!
if [ ! -e ${OPENSHIFT_DATA_DIR}/.mailchimp ]; then
  echo "Initialization of mailchimp file"

  echo -n 'Enter the mailchimp api key: '
  read -s api_key

  echo "export MAILCHIMP_APIKEY='${api_key}'"    >> ${OPENSHIFT_DATA_DIR}/.mailchimp
fi

echo "Load the mailchimp api file"
source ${OPENSHIFT_DATA_DIR}/.mailchimp
